{% extends 'base.html' %}
{% from 'bootstrap/form.html' import render_form %}

{% block body %}
    <h3>Hello, {{ current_user.username }}!</h3>
    <div class="col-md-8">
        <div>
            {% if current_user.can(Permission.WRITE) %}
                {{ render_form(form) }}
            {% endif %}
        </div>
        <ul class="posts">
            {% for post in posts %}
                <li class="post d-flex">
                    <div class="profile-thumbnail">
                        <a href="{{ url_for('.user', username=post.author.username) }}">
                            <img src="{{ post.author.gravatar(size=40) }}" class="img-rounded">
                        </a>
                    </div>
                    <div class="flex-grow-1 ml-3">
                        <div class="post-date">{{ moment(post.timestamp).fromNow() }}</div>
                        <div class="post-author">
                            <a href="{{ url_for('.user', username=post.author.username) }}">
                                {{ post.author.username }}
                            </a>
                        </div>
                        <div class="post-body">{{ post.body }}</div>
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock body %}